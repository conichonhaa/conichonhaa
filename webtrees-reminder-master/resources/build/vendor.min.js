var jqCronDefaultSettings={texts:{},monthdays:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],hours:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],minutes:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],lang:"en",enabled_minute:!1,enabled_hour:!0,enabled_day:!0,enabled_week:!0,enabled_month:!0,enabled_year:!0,multiple_dom:!1,multiple_month:!1,multiple_mins:!1,multiple_dow:!1,multiple_time_hours:!1,multiple_time_minutes:!1,numeric_zero_pad:!1,default_period:"day",default_value:"",no_reset_button:!0,disabled:!1,bind_to:null,bind_method:{set:function(e,t){e.is(":input")?e.val(t):e.data("jqCronValue",t)},get:function(e){return e.is(":input")?e.val():e.data("jqCronValue")}}};(function(e){var t=function(n,r){for(var a in r)e.isPlainObject(r[a])?n[a]=t(n[a]&&e.isPlainObject(n[a])?n[a]:{},r[a]):e.isArray(r[a])?n[a]=r[a].slice(0):void 0!==r[a]&&(n[a]=r[a]);return n};this.jqCronMergeSettings=function(e){return t(t({},jqCronDefaultSettings),e||{})}}).call(this,jQuery),function(e){e.fn.jqCronGetInstance=function(){return this.data("jqCron")}}.call(this,jQuery),function(e){e.fn.jqCron=function(t){var n=t;return this.each(function(){var t,r,a=e(this),s=jqCronMergeSettings(n),i=s.texts[s.lang];if("object"!=typeof i||e.isEmptyObject(i))console&&console.error('Missing translations for language "'+s.lang+'". Please include jqCron.'+s.lang+".js or manually provide the necessary translations when calling $.fn.jqCron().");else{if(!s.jquery_container)if(a.is(":container"))s.jquery_element=a.uniqueId("jqCron");else{if(!a.is(":autoclose"))return void(console&&console.error(s.texts[s.lang].error1.replace("%s",this.tagName)));1==a.next(".jqCron").length&&a.next(".jqCron").remove(),s.jquery_element=e('<span class="jqCron"></span>').uniqueId("jqCron").insertAfter(a)}a.is(":input")&&(s.bind_to=s.bind_to||a),s.bind_to?(s.bind_to.is(":input")&&s.bind_to.blur(function(){var e=s.bind_method.get(s.bind_to);a.jqCronGetInstance().setCron(e)}),r=s.bind_method.get(s.bind_to),(t=new jqCron(s)).setCron(r)):t=new jqCron(s),e(this).data("jqCron",t)}})}}.call(this,jQuery),function(e){var t=[];this.jqCron=function(n){var r,a,s,i,o,l,u,c=!1,d=this,h=this,m=e('<span class="jqCron-container"></span>'),f=e('<span class="jqCron-blocks"></span>'),p=e('<span class="jqCron-period"></span>'),g=e('<span class="jqCron-dom"></span>'),_=e('<span class="jqCron-month"></span>'),b=e('<span class="jqCron-mins"></span>'),C=e('<span class="jqCron-dow"></span>'),y=e('<span class="jqCron-time"></span>'),j=e('<span class="jqCron-cross">&#10008;</span>'),v=[];function q(e,r,s){var o=new jqCronSelector(d,e,r,s);return o.$.bind("selector:open",function(){for(var e=t.length;e--;)if(t[e]!=d)t[e].closeSelectors();else for(var n=v.length;n--;)v[n]!=o&&v[n].close()}),o.$.bind("selector:change",function(){var e=!1;c&&(n.multiple_mins==n.multiple_time_minutes&&(o==a?e=i.setValue(a.getValue()):o==i&&(e=a.setValue(i.getValue()))),e||m.trigger("cron:change",d.getCron()))}),v.push(o),o}this.disable=function(){m.addClass("disable"),n.disabled=!0,d.closeSelectors()},this.isDisabled=function(){return 1==n.disabled},this.enable=function(){m.removeClass("disable"),n.disabled=!1},this.getCron=function(){var e=r.getValue(),t=["*","*","*","*","*"];return"hour"==e&&(t[0]=a.getCronValue()),"day"!=e&&"week"!=e&&"month"!=e&&"year"!=e||(t[0]=i.getCronValue(),t[1]=s.getCronValue()),"month"!=e&&"year"!=e||(t[2]=l.getCronValue()),"year"==e&&(t[3]=u.getCronValue()),"week"==e&&(t[4]=o.getCronValue()),t.join(" ")},this.setCron=function(e){if(e)try{var t=(e=e.replace(/\s+/g," ").replace(/^ +/,"").replace(/ +$/,"")).replace(/\*\//g,"").replace(/[^\* ]/g,"-").replace(/-+/g,"-").replace(/ +/g,""),n=e.split(" ");5!=n.length&&d.error(d.getText("error2")),"*****"==t?r.setValue("minute"):"-****"==t?(r.setValue("hour"),a.setCronValue(n[0]),i.setCronValue(n[0])):"***"==t.substring(2,t.length)?(r.setValue("day"),a.setCronValue(n[0]),i.setCronValue(n[0]),s.setCronValue(n[1])):"-**"==t.substring(2,t.length)?(r.setValue("month"),a.setCronValue(n[0]),i.setCronValue(n[0]),s.setCronValue(n[1]),l.setCronValue(n[2])):"**-"==t.substring(2,t.length)?(r.setValue("week"),a.setCronValue(n[0]),i.setCronValue(n[0]),s.setCronValue(n[1]),o.setCronValue(n[4])):"-*"==t.substring(3,t.length)?(r.setValue("year"),a.setCronValue(n[0]),i.setCronValue(n[0]),s.setCronValue(n[1]),l.setCronValue(n[2]),u.setCronValue(n[3])):d.error(d.getText("error4")),d.clearError()}catch(e){}},this.closeSelectors=function(){for(var e=v.length;e--;)v[e].close()},this.getId=function(){return h.attr("id")},this.getText=function(e){var t=n.texts[n.lang][e]||null;return"string"==typeof t&&t.match("<b")&&(t='<span class="jqCron-text">'+(t=t.replace(/(<b *\/>)/gi,'</span><b /><span class="jqCron-text">'))+"</span>"),t},this.getHumanText=function(){var t=[];return m.find("> span > span:visible").find(".jqCron-text, .jqCron-selector > span").each(function(){var n=e(this).text().replace(/\s+$/g,"").replace(/^\s+/g,"");n&&t.push(n)}),t.join(" ").replace(/\s:\s/g,":")},this.getSettings=function(){return n},this.error=function(e){throw console&&console.error("[jqCron Error] "+e),m.addClass("jqCron-error").attr("title",e),e},this.clearError=function(){m.attr("title","").removeClass("jqCron-error")},this.clear=function(){l.setValue([]),o.setValue([]),a.setValue([]),u.setValue([]),s.setValue([]),i.setValue([]),d.triggerChange()},this.init=function(){var t,V;if(!c){"disable"in(n=jqCronMergeSettings(n))&&!n.disabled&&(n.disabled=n.disable),"hour_labels"in n||(n.hour_labels=n.hours.map(function(e){return String(e)})),"minute_labels"in n||(n.minute_labels=n.minutes.map(function(e){return String(e)})),"monthday_labels"in n||(n.monthday_labels=n.monthdays.map(function(e){return String(e)})),n.jquery_element||d.error(d.getText("error3")),(h=n.jquery_element).append(m),m.data("id",n.id),m.data("jqCron",d),m.append(f),n.no_reset_button||m.append(j),!n.disabled||m.addClass("disable"),f.append(p),/^(ko)$/i.test(n.lang)?f.append(_,g):f.append(g,_),f.append(b),f.append(C),f.append(y),j.click(function(){d.isDisabled()||d.clear()}),m.bind("cron:change",function(e,t){n.bind_to&&(n.bind_method.set&&n.bind_method.set(n.bind_to,t),d.clearError())}),p.append(d.getText("text_period")),r=q(p,!1,"period"),n.enabled_minute&&r.add("minute",d.getText("name_minute")),n.enabled_hour&&r.add("hour",d.getText("name_hour")),n.enabled_day&&r.add("day",d.getText("name_day")),n.enabled_week&&r.add("week",d.getText("name_week")),n.enabled_month&&r.add("month",d.getText("name_month")),n.enabled_year&&r.add("year",d.getText("name_year")),r.$.bind("selector:change",function(e,t){g.hide(),_.hide(),b.hide(),C.hide(),y.hide(),"hour"==t?b.show():"day"==t?y.show():"week"==t?(C.show(),y.show()):"month"==t?(g.show(),y.show()):"year"==t&&(g.show(),_.show(),y.show())}),r.setValue(n.default_period),b.append(d.getText("text_mins")),a=q(b,n.multiple_mins,"minutes");for(t=0,V=n.minutes;t<V.length;t++)a.add(V[t],V[t]);for(y.append(d.getText("text_time")),s=q(y,n.multiple_time_hours,"time_hours"),t=0,V=n.hours,labelsList=n.hour_labels;t<V.length;t++)s.add(V[t],labelsList[t]);for(i=q(y,n.multiple_time_minutes,"time_minutes"),t=0,V=n.minutes,labelsList=n.minute_labels;t<V.length;t++)i.add(V[t],labelsList[t]);for(C.append(d.getText("text_dow")),o=q(C,n.multiple_dow,"day_of_week"),t=0,V=d.getText("weekdays");t<V.length;t++)o.add(t+1,V[t]);for(g.append(d.getText("text_dom")),l=q(g,n.multiple_dom,"day_of_month"),t=0,V=n.monthdays,labelsList=n.monthday_labels;t<V.length;t++)l.add(V[t],labelsList[t]);for(_.append(d.getText("text_month")),u=q(_,n.multiple_month,"month"),t=0,V=d.getText("months");t<V.length;t++)u.add(t+1,V[t]);e("body").click(function(){var e,t=v.length;for(e=0;e<t;e++)v[e].close()}),c=!0,n.default_value&&d.setCron(n.default_value)}},this.triggerChange=function(){m.trigger("cron:change",d.getCron())},t.push(this),this.$=m;try{this.init(),d.triggerChange()}catch(e){}}}.call(this,jQuery),function(e){this.jqCronSelector=function(t,n,r,a){var s=this,i=e('<ul class="jqCron-selector-list"></ul>'),o=e('<span class="jqCron-selector-title"></span>'),l=e('<span class="jqCron-selector"></span>'),u={},c=[],d=!0,h=t.getSettings().numeric_zero_pad;this.getTotalItem=function(e){var t=0;switch(a){case"minutes":case"time_minutes":t=60-this.itemStartAt();break;case"time_hours":t=24-this.itemStartAt();break;case"day_of_month":t=31-this.itemStartAt();break;case"month":t=12-this.itemStartAt();break;case"day_of_week":t=7-this.itemStartAt()}if(e){for(var n=0,r=0;r<t;r++)r%e==0&&(n=r);return n/e+1}return t},this.itemStartAt=function(){switch(a){case"minutes":case"time_minutes":case"time_hours":return 0;case"day_of_month":case"month":case"day_of_week":return 1}},this.getValue=function(){return r?c:c[0]},this.getCronValue=function(){if(0==c.length)return"*";for(var e=[c[0]],t=c[0],n=c[0],r=c.length,a=1;a<r;a++)c[a]==n+1?(n=c[a],e[e.length-1]=t+"-"+n):(t=n=c[a],e.push(n));if(e.length>1){var i=0===e[0]?e[1]:e[0];if(this.getTotalItem(i)===e.length){var o=!0,l=0;for(a=1;a<e.length;a++)if(l+=i,e[a]%i!=0||i*a!==l){o=!1;break}if(o)return s.multipleOf=i,"*/"+i}}return e.join(",")},this.setCronValue=function(e){var t,n,r=[];if("*"!==e)for(;""!=e;)if((t=e.match(/^\*\/([0-9]+),?/))&&2==t.length){for(n=0;n<=59;n+=0|t[1])r.push(n);e=e.replace(t[0],"")}else if((t=e.match(/^([0-9]+)-([0-9]+)\/([0-9]+),?/))&&4==t.length){for(n=0|t[1];n<=(0|t[2]);n+=0|t[3])r.push(n);e=e.replace(t[0],"")}else if((t=e.match(/^([0-9]+)-([0-9]+),?/))&&3==t.length){for(n=0|t[1];n<=(0|t[2]);n++)r.push(n);e=e.replace(t[0],"")}else{if(!(t=e.match(/^([0-9]+),?/))||2!=t.length)return;r.push(0|t[1]),e=e.replace(t[0],"")}s.setValue(r)},this.close=function(){l.trigger("selector:close")},this.open=function(){l.trigger("selector:open")},this.isOpened=function(){return i.is(":visible")},this.addValue=function(e){var t=r?c.slice(0):[];t.push(e),s.setValue(t)},this.removeValue=function(e){if(r){var t,n=[];for(t=0;t<c.length;t++)e!=[c[t]]&&n.push(c[t]);s.setValue(n)}else s.clear()},this.setValue=function(t){var n,a=[],s=c.join(" ");if(e.isArray(t)||(t=[t]),i.find("li").removeClass("selected"),(t=function(e){for(var t=0,n=e.length,r={},a=[];t<n;)r[e[t]]||(r[e[t]]=a.push(e[t])),t++;return a}(t)).sort(function(e,t){var n=typeof e;return n==typeof t&&"number"==n?e-t:String(e)==String(t)?0:String(e)<String(t)?-1:1}),r)for(n=0;n<t.length;n++)t[n]in u&&(u[t[n]].addClass("selected"),a.push(t[n]));else t[0]in u&&(u[t[0]].addClass("selected"),a.push(t[0]));return s!=(c=a).join(" ")&&(l.trigger("selector:change",r?t:t[0]),!0)},this.getTitleText=function(){var e=function(e){return e in u?u[e].text():e};if(0==c.length)return t.getText("empty_"+a)||t.getText("empty");var n,r=[e(c[0])],i=c[0],o=c[0],l=c.length;for(n=1;n<l;n++)c[n]==o+1?(o=c[n],r[r.length-1]=e(i)+"-"+e(o)):(i=o=c[n],r.push(e(o)));if(r.length>1){var d="0"===r[0]?+r[1]:+r[0],h=this.getTotalItem(d);if(console&&console.log(a,h,r.length,s.multipleOf),h===r.length){var m=!0,f=0;for(n=1;n<r.length;n++)if(f+=d,+r[n]%d!=0||d*n!==f){m=!1;break}if(m)return"every "+d}}return r.join(",")},this.clear=function(){u={},s.setValue([]),i.empty()},this.add=function(t,n){(n+"").match(/^[0-9]+$/)||(d=!1),h&&d&&n<10&&(n="0"+n);var a=e("<li>"+n+"</li>");i.append(a),u[t]=a;var o=0,l=null,c=this.getTotalItem(),m=this.itemStartAt();a.click(function(a){o++;var i=e(this);if(1===o)l=setTimeout(function(){r&&i.hasClass("selected")?s.removeValue(t):(s.addValue(t),r||s.close()),o=0},200);else if(r){for(var u=+n,d=[],h=m;h<c;h++)s.removeValue(h),h%u==0&&s.multipleOf!==u&&d.push(h);if(s.multipleOf!==u)for(s.multipleOf=u,h=0;h<d.length;h++)s.addValue(d[h]);else s.multipleOf=null;clearTimeout(l),o=0}}).dblclick(function(e){e.preventDefault()})},this.$=l,n.find("b:eq(0)").after(l).remove(),l.addClass("jqCron-selector-"+n.find(".jqCron-selector").length).append(o).append(i).bind("selector:open",function(){if(d){var e=1,t=i.find("li").length;t>5&&t<=16?e=2:t>16&&t<=23?e=3:t>23&&t<=40?e=4:t>40&&(e=5),i.addClass("cols"+e)}i.show()}).bind("selector:close",function(){i.hide()}).bind("selector:change",function(){o.html(s.getTitleText())}).click(function(e){e.stopPropagation()}).trigger("selector:change"),e.fn.disableSelection&&l.disableSelection(),o.click(function(e){s.isOpened()||t.isDisabled()?s.close():s.open()}),s.close(),s.clear()}}.call(this,jQuery),function(e){var t=0;e.fn.uniqueId=function(n){return this.each(function(){if(!e(this).attr("id")){var r=function(e){for(var n;;)if(n=(e||"JQUID")+""+ ++t,!document.getElementById(n))return n}(n);e(this).attr("id",r)}})}}.call(this,jQuery),function(e){e.extend(e.expr[":"],{container:function(e){return(e.tagName+"").toLowerCase()in{a:1,abbr:1,acronym:1,address:1,b:1,big:1,blockquote:1,button:1,cite:1,code:1,dd:1,del:1,dfn:1,div:1,dt:1,em:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,i:1,ins:1,kbd:1,label:1,li:1,p:1,pre:1,q:1,samp:1,small:1,span:1,strong:1,sub:1,sup:1,td:1,tt:1}},autoclose:function(e){return(e.tagName+"").toLowerCase()in{area:1,base:1,basefont:1,br:1,col:1,frame:1,hr:1,img:1,input:1,link:1,meta:1,param:1}}})}.call(this,jQuery),jqCronDefaultSettings.texts.en={empty:"every",empty_minutes:"every",empty_time_hours:"every hour",empty_time_minutes:"every minute",empty_day_of_week:"every day of the week",empty_day_of_month:"every day of the month",empty_month:"every month",name_minute:"minute",name_hour:"hour",name_day:"day",name_week:"week",name_month:"month",name_year:"year",text_period:"Every <b />",text_mins:" at <b /> minute(s) past the hour",text_time:" at <b />:<b />",text_dow:" on <b />",text_month:" of <b />",text_dom:" on <b />",error1:"The tag %s is not supported !",error2:"Bad number of elements",error3:"The jquery_element should be set into jqCron settings",error4:"Unrecognized expression",weekdays:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],months:["january","february","march","april","may","june","july","august","september","october","november","december"]};
